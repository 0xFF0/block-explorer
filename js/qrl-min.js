function refreshData(){$.ajax({url:"http://104.251.219.215:8080/api/",type:"GET"}),$.ajax({url:"http://104.251.219.215:8080/api/stats",type:"GET",success:function(e,a,t){$(".dimmer").hide(),drawStats(e)}}),$.ajax({url:"http://104.251.219.215:8080/api/last_tx/5",type:"GET",success:function(e,a,t){$(".dimmer").hide(),drawTxTable(e)}}),$.ajax({url:"http://104.251.219.215:8080/api/last_block/5",type:"GET",success:function(e,a,t){$(".dimmer").hide(),drawBlockTable(e)}})}function drawStats(e){$("#network").text(":"+e.network);var a=moment.duration(e.network_uptime,"seconds").format("d[d] h[h] mm[min]");$("#uptime").text(a),$("#nodes").text(e.nodes);var a=moment.duration(e.block_time_variance,"seconds");a=Math.round(a/10)/100,$("#variance").text(a+"s");var a=moment.duration(e.block_time,"seconds").format("s[s]");$("#blocktime").text(a),$("#blockheight").text(e.blockheight),$("#validators").text(e.stake_validators),$("#PCemission").text(e.staked_percentage_emission+"%"),$("#epoch").text(e.epoch);var a=e.emission;a=Math.round(1e4*a)/1e4,$("#emission").text(a);var a=e.unmined;a=Math.round(1e4*a)/1e4,$("#unmined").text(a),$("#reward").text(e.block_reward)}function drawTxTable(e){$("#TxT").DataTable().clear(),_.each(e.transactions,function(e){drawTxRow(e.timestamp,e.amount,e.txhash,e.block)})}function drawBlockTable(e){$("#BlT").DataTable().clear(),_.each(e.blocks,function(e){drawBlockRow(e.timestamp,e.number_transactions,e.blockhash,e.blocknumber)})}function drawTxRow(e,a,t,r){var o=moment.unix(e),n=$("#TxT").DataTable();o.isValid()?n.row.add([o.fromNow(),a,t,r,e]).draw(!0):n.row.add(["unconfirmed",a,t,r,e]).draw(!0)}function drawBlockRow(e,a,t,r){var o=moment.unix(e);$("#BlT").DataTable().row.add([o.fromNow(),a,t,r,e]).draw(!0)}$(document).ready(function(){$(".tabular.menu .item").tab(),$("#BlT").DataTable({select:!0,paging:!1,info:!1,searching:!1,lengthChange:!1,order:[[4,"dec"],[3,"dec"]],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:1},{orderable:!1,targets:2},{orderable:!1,targets:3},{targets:[4],visible:!1,searchable:!1}],rowReorder:{enable:!1}}),$("#TxT").DataTable({select:!0,paging:!1,info:!1,searching:!1,lengthChange:!1,order:[[0,"dec"],[3,"dec"]],columnDefs:[{orderable:!1,targets:0},{orderable:!1,targets:1},{orderable:!1,targets:2},{orderable:!1,targets:3},{targets:[4],visible:!1,searchable:!1}],rowReorder:{enable:!1}}),$(".table").on("click",function(e){var a=$(this).DataTable(),t=a.rows(e.target._DT_CellIndex.row).data();"BlT"==e.currentTarget.id?($("#domModalTitle").text("Blockhash clicked"),$("#domModalBody").text("Blockhash: "+t[0][2]),window.location.href="search.html#"+t[0][3]):doSearch(t[0][2])}),refreshData()}),window.setInterval(function(){refreshData()},5e3);